<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Hipotecarios - Septiembre 2025</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #ff7f00 0%, #ff9500 25%, #ffb347 75%, #ffffff 100%);
            min-height: 100vh;
            padding: 20px;
        }

        /* Navigation Menu Styles */
        .nav-menu {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 15px 0;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(255, 127, 0, 0.15);
            backdrop-filter: blur(10px);
        }

        .nav-container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 0 30px;
        }

        .nav-list {
            display: flex;
            justify-content: center;
            list-style: none;
            gap: 40px;
        }

        .nav-item {
            position: relative;
        }

        .nav-link {
            color: #ff7f00;
            text-decoration: none;
            font-weight: 600;
            font-size: 1.1rem;
            padding: 10px 20px;
            border-radius: 8px;
            transition: all 0.3s ease;
            display: block;
        }

        .nav-link:hover, .nav-link.active {
            background: linear-gradient(135deg, #ff7f00, #ff9500);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 127, 0, 0.3);
        }

        /* Sedes Coopexpress en l√≠nea horizontal */
        .sedes-menu {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 10px;
            padding: 10px 0;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(255, 127, 0, 0.1);
            display: none;
        }

        .sedes-menu.show {
            display: block;
        }

        .sedes-container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 0 30px;
        }

        .sedes-list {
            display: flex;
            justify-content: center;
            list-style: none;
            gap: 30px;
            flex-wrap: wrap;
        }

        .sede-item {
            background: linear-gradient(135deg, #fff8f0, #ffffff);
            border: 2px solid rgba(255, 127, 0, 0.2);
            border-radius: 8px;
            padding: 8px 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            color: #ff7f00;
        }

        .sede-item:hover, .sede-item.active {
            background: linear-gradient(135deg, #ff7f00, #ff9500);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 3px 10px rgba(255, 127, 0, 0.3);
        }

        .dropdown-item:hover {
            background: linear-gradient(135deg, #fff8f0, #ffede0);
            color: #ff7f00;
            padding-left: 25px;
        }

        .dashboard-container {
            max-width: 1600px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(255, 127, 0, 0.3);
            padding: 30px;
            backdrop-filter: blur(10px);
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 30px;
            min-height: 80vh;
        }

        .header {
            grid-column: 1 / -1;
            text-align: center;
            margin-bottom: 20px;
            position: relative;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 4px;
            background: linear-gradient(90deg, #ff7f00, #ff9500);
            border-radius: 2px;
        }

        .header h1 {
            color: #ff7f00;
            font-size: 2.8rem;
            font-weight: 700;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(255, 127, 0, 0.2);
        }

        .header p {
            color: #666;
            font-size: 1.2rem;
            font-weight: 300;
        }

        /* Panel izquierdo - Lista de asesores */
        .asesores-panel {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(255, 127, 0, 0.15);
            border: 1px solid rgba(255, 127, 0, 0.2);
            height: fit-content;
        }

        .asesores-title {
            color: #ff7f00;
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 20px;
            text-align: center;
            position: relative;
        }

        .asesores-title::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 50%;
            transform: translateX(-50%);
            width: 50px;
            height: 2px;
            background: linear-gradient(90deg, #ff7f00, #ff9500);
        }

        .asesor-item {
            background: linear-gradient(135deg, #ffffff 0%, #fff8f0 100%);
            border: 2px solid transparent;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .asesor-item:hover {
            border-color: #ff7f00;
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(255, 127, 0, 0.2);
        }

        .asesor-item.active {
            background: linear-gradient(135deg, #ff7f00, #ff9500);
            color: white;
            border-color: #ff7f00;
            transform: translateX(8px);
            box-shadow: 0 8px 20px rgba(255, 127, 0, 0.3);
        }

        .asesor-name {
            font-weight: 700;
            font-size: 1.1rem;
            margin-bottom: 5px;
        }

        .asesor-preview {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        /* Panel derecho - Detalles del asesor */
        .detalles-panel {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .asesor-header {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(255, 127, 0, 0.15);
            border: 1px solid rgba(255, 127, 0, 0.2);
            text-align: center;
        }

        .asesor-header h2 {
            color: #ff7f00;
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .asesor-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .stat-card {
            background: linear-gradient(135deg, #ff7f00, #ff9500);
            color: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 800;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .charts-grid {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 20px;
        }

        .chart-container {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(255, 127, 0, 0.1);
            border: 1px solid rgba(255, 127, 0, 0.2);
            min-height: 350px;
            display: flex;
            flex-direction: column;
        }

        .chart-container canvas {
            flex: 1;
            max-height: 300px !important;
        }

        .chart-title {
            color: #ff7f00;
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 15px;
            text-align: center;
            position: relative;
        }

        .chart-title::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 50%;
            transform: translateX(-50%);
            width: 30px;
            height: 2px;
            background: linear-gradient(90deg, #ff7f00, #ff9500);
        }

        .estado-inicial {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 300px;
            color: #999;
            font-size: 1.2rem;
            text-align: center;
        }

        .estado-inicial .icono {
            font-size: 4rem;
            color: #ff7f00;
            margin-bottom: 20px;
            opacity: 0.5;
        }

        .resumen-table {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(255, 127, 0, 0.1);
            border: 1px solid rgba(255, 127, 0, 0.2);
            grid-column: 1 / -1;
        }

        .table {
            width: 100%;
            border-collapse: collapse;
        }

        .table th {
            background: linear-gradient(135deg, #ff7f00, #ff9500);
            color: white;
            padding: 12px;
            text-align: left;
            font-weight: 600;
            border-radius: 5px;
        }

        .table td {
            padding: 10px 12px;
            border-bottom: 1px solid #f0f0f0;
        }

        .table tr:nth-child(even) {
            background-color: #fff8f0;
        }

        .status-badge {
            padding: 4px 10px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 600;
            text-align: center;
            display: inline-block;
            min-width: 60px;
        }

        .badge-prospecto { background: rgba(255, 127, 0, 0.1); color: #ff7f00; border: 1px solid rgba(255, 127, 0, 0.3); }
        .badge-oportunidad { background: rgba(255, 149, 0, 0.1); color: #ff9500; border: 1px solid rgba(255, 149, 0, 0.3); }
        .badge-documentacion { background: rgba(255, 179, 71, 0.1); color: #cc7a00; border: 1px solid rgba(255, 179, 71, 0.3); }
        .badge-aprobado { background: rgba(50, 205, 50, 0.1); color: #32cd32; border: 1px solid rgba(50, 205, 50, 0.3); }
        .badge-desembolso { background: rgba(0, 128, 0, 0.1); color: #008000; border: 1px solid rgba(0, 128, 0, 0.3); }
        .badge-perdido { background: rgba(255, 0, 0, 0.1); color: #dc3545; border: 1px solid rgba(255, 0, 0, 0.3); }

        @media (max-width: 1024px) {
            .dashboard-container {
                grid-template-columns: 1fr;
                padding: 15px;
            }
            
            .charts-grid {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation Menu -->
    <nav class="nav-menu">
        <div class="nav-container">
            <ul class="nav-list">
                <li class="nav-item">
                    <a href="#" class="nav-link" id="agencia-central-link" onclick="mostrarAgenciaCentral()">Agencia Central</a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" id="coopexpress-link" onclick="mostrarCoopexpress()">Coopexpress</a>
                </li>
            </ul>
        </div>
    </nav>

    <!-- Sedes Coopexpress -->
    <div class="sedes-menu" id="sedes-menu">
        <div class="sedes-container">
            <ul class="sedes-list">
                <li class="sede-item" onclick="seleccionarSede('escuintla')">Escuintla</li>
                <li class="sede-item" onclick="seleccionarSede('coban')">Cob√°n</li>
                <li class="sede-item" onclick="seleccionarSede('4caminos')">4 Caminos</li>
                <li class="sede-item" onclick="seleccionarSede('peten')">Pet√©n</li>
                <li class="sede-item" onclick="seleccionarSede('mazatenango')">Mazatenango</li>
            </ul>
        </div>
    </div>
    <div class="dashboard-container">
        <div class="header">
            <h1>Dashboard Hipotecarios</h1>
            <p>An√°lisis de Asignaciones por Asesor - Septiembre 2025</p>
            
            <!-- Estad√≠sticas Generales de Agencia Central -->
            <div id="stats-agencia-central" class="stats-generales" style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin-top: 20px; max-width: 800px; margin-left: auto; margin-right: auto;">
                <div class="stat-card-general" style="background: linear-gradient(135deg, #ff7f00, #ff9500); color: white; padding: 20px; border-radius: 15px; text-align: center; box-shadow: 0 10px 30px rgba(255, 127, 0, 0.2);">
                    <div style="font-size: 2.5rem; font-weight: 800; margin-bottom: 5px;">166</div>
                    <div style="font-size: 1rem; opacity: 0.9;">Total Asignados</div>
                    <div style="font-size: 0.8rem; opacity: 0.7; margin-top: 5px;">Agencia Central</div>
                </div>
                <div class="stat-card-general" style="background: linear-gradient(135deg, #32cd32, #228b22); color: white; padding: 20px; border-radius: 15px; text-align: center; box-shadow: 0 10px 30px rgba(50, 205, 50, 0.2);">
                    <div style="font-size: 2.5rem; font-weight: 800; margin-bottom: 5px;">90</div>
                    <div style="font-size: 1rem; opacity: 0.9;">Activos</div>
                    <div style="font-size: 0.8rem; opacity: 0.7; margin-top: 5px;">54.2%</div>
                </div>
                <div class="stat-card-general" style="background: linear-gradient(135deg, #dc3545, #c82333); color: white; padding: 20px; border-radius: 15px; text-align: center; box-shadow: 0 10px 30px rgba(220, 53, 69, 0.2);">
                    <div style="font-size: 2.5rem; font-weight: 800; margin-bottom: 5px;">76</div>
                    <div style="font-size: 1rem; opacity: 0.9;">Perdidos</div>
                    <div style="font-size: 0.8rem; opacity: 0.7; margin-top: 5px;">45.8%</div>
                </div>
                <div class="stat-card-general" style="background: linear-gradient(135deg, #6f42c1, #5a32a3); color: white; padding: 20px; border-radius: 15px; text-align: center; box-shadow: 0 10px 30px rgba(111, 66, 193, 0.2);">
                    <div style="font-size: 2.5rem; font-weight: 800; margin-bottom: 5px;">8</div>
                    <div style="font-size: 1rem; opacity: 0.9;">Total Asesores</div>
                    <div style="font-size: 0.8rem; opacity: 0.7; margin-top: 5px;">Agencia Central</div>
                </div>
            </div>
        </div>

        <!-- Panel izquierdo - Lista de asesores -->
        <div class="asesores-panel">
            <h3 class="asesores-title">Asesores - Agencia Central</h3>
            <div id="asesoresList">
                <div class="asesor-item" onclick="seleccionarAsesor('miguel')">
                    <div class="asesor-name">Miguel</div>
                    <div class="asesor-preview">18 casos activos</div>
                </div>
                <div class="asesor-item" onclick="seleccionarAsesor('emely')">
                    <div class="asesor-name">Emely</div>
                    <div class="asesor-preview">13 casos activos</div>
                </div>
                <div class="asesor-item" onclick="seleccionarAsesor('gabriel')">
                    <div class="asesor-name">Gabriel</div>
                    <div class="asesor-preview">11 casos activos</div>
                </div>
                <div class="asesor-item" onclick="seleccionarAsesor('brayan')">
                    <div class="asesor-name">Brayan</div>
                    <div class="asesor-preview">17 casos activos</div>
                </div>
                <div class="asesor-item" onclick="seleccionarAsesor('rudy')">
                    <div class="asesor-name">Rudy</div>
                    <div class="asesor-preview">6 casos activos</div>
                </div>
                <div class="asesor-item" onclick="seleccionarAsesor('jorge')">
                    <div class="asesor-name">Jorge</div>
                    <div class="asesor-preview">8 casos activos</div>
                </div>
                <div class="asesor-item" onclick="seleccionarAsesor('carlos')">
                    <div class="asesor-name">Carlos</div>
                    <div class="asesor-preview">16 casos activos</div>
                </div>
                <div class="asesor-item" onclick="seleccionarAsesor('kevin')">
                    <div class="asesor-name">Kevin</div>
                    <div class="asesor-preview">1 caso activo</div>
                </div>
            </div>
        </div>

        <!-- Panel derecho - Detalles del asesor seleccionado -->
        <div class="detalles-panel">
            <div id="contenidoAsesor">
                <div class="estado-inicial">
                    <div class="icono">üë§</div>
                    <p>Selecciona un asesor de la lista para ver sus detalles</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Base de datos de asesores
        const asesoresData = {
            miguel: {
                nombre: "Miguel",
                totalClientes: 18,
                clientesActivos: 18,
                clientesPerdidos: 0,
                etapas: {
                    prospecto: 6,
                    oportunidad: 2,
                    negociacion: 2,
                    comite: 1,
                    leads: 7
                },
                medioGenerador: {
                    social_manager: 7,
                    sitio_web: 1,
                    whatsapp: 9,
                    referido: 1
                },
                origen: {
                    asesor: 9,
                    ia: 9
                }
            },
            emely: {
                nombre: "Emely",
                totalClientes: 13,
                clientesActivos: 13,
                clientesPerdidos: 0,
                etapas: {
                    prospecto: 0,
                    oportunidad: 3,
                    negociacion: 1,
                    comite: 0,
                    leads: 8,
                    desembolso: 0,
                    desembolsado: 0,
                    reconsideracion: 1
                },
                medioGenerador: {
                    social_manager: 6,
                    whatsapp: 4,
                    facebook: 1,
                    pbx: 1,
                    referido: 1,
                    sitio_web: 0,
                    visita_oficina: 0
                },
                origen: {
                    asesor: 9,
                    ia: 4
                }
            },
            gabriel: {
                nombre: "Gabriel",
                totalClientes: 11,
                clientesActivos: 11,
                clientesPerdidos: 0,
                etapas: {
                    prospecto: 0,
                    oportunidad: 2,
                    negociacion: 0,
                    comite: 0,
                    leads: 9,
                    desembolso: 0,
                    desembolsado: 0,
                    reconsideracion: 0
                },
                medioGenerador: {
                    whatsapp: 8,
                    social_manager: 1,
                    facebook: 1,
                    sitio_web: 1,
                    pbx: 0,
                    referido: 0,
                    visita_oficina: 0
                },
                origen: {
                    asesor: 1,
                    ia: 10
                }
            },
            brayan: {
                nombre: "Brayan",
                totalClientes: 17,
                clientesActivos: 17,
                clientesPerdidos: 0,
                etapas: {
                    prospecto: 0,
                    oportunidad: 2,
                    negociacion: 0,
                    comite: 0,
                    leads: 12,
                    desembolso: 1,
                    desembolsado: 2
                },
                medioGenerador: {
                    social_manager: 5,
                    whatsapp: 4,
                    pbx: 4,
                    sitio_web: 2,
                    referido: 1,
                    visita_oficina: 1
                },
                origen: {
                    asesor: 13,
                    ia: 4
                }
            },
            rudy: {
                nombre: "Rudy",
                totalClientes: 6,
                clientesActivos: 6,
                clientesPerdidos: 0,
                etapas: {
                    prospecto: 0,
                    oportunidad: 2,
                    negociacion: 1,
                    comite: 0,
                    leads: 1,
                    desembolso: 0,
                    desembolsado: 0,
                    reconsideracion: 2
                },
                medioGenerador: {
                    whatsapp: 4,
                    social_manager: 1,
                    pbx: 1,
                    facebook: 0,
                    sitio_web: 0,
                    referido: 0,
                    visita_oficina: 0
                },
                origen: {
                    asesor: 2,
                    ia: 4
                }
            },
            jorge: {
                nombre: "Jorge",
                totalClientes: 8,
                clientesActivos: 8,
                clientesPerdidos: 0,
                etapas: {
                    prospecto: 0,
                    oportunidad: 1,
                    negociacion: 0,
                    comite: 0,
                    leads: 7,
                    desembolso: 0,
                    desembolsado: 0,
                    reconsideracion: 0
                },
                medioGenerador: {
                    whatsapp: 6,
                    facebook: 1,
                    social_manager: 1,
                    sitio_web: 0,
                    pbx: 0,
                    referido: 0,
                    visita_oficina: 0
                },
                origen: {
                    asesor: 1,
                    ia: 7
                }
            },
            carlos: {
                nombre: "Carlos",
                totalClientes: 16,
                clientesActivos: 16,
                clientesPerdidos: 0,
                etapas: {
                    prospecto: 0,
                    oportunidad: 5,
                    negociacion: 1,
                    comite: 2,
                    leads: 8,
                    desembolso: 0,
                    desembolsado: 0
                },
                medioGenerador: {
                    social_manager: 8,
                    whatsapp: 4,
                    facebook: 2,
                    pbx: 1,
                    sitio_web: 0,
                    referido: 0,
                    visita_oficina: 0
                },
                origen: {
                    asesor: 9,
                    ia: 7
                }
            },
            kevin: {
                nombre: "Kevin",
                totalClientes: 1,
                clientesActivos: 1,
                clientesPerdidos: 0,
                etapas: {
                    prospecto: 0,
                    oportunidad: 0,
                    negociacion: 0,
                    comite: 0,
                    leads: 1,
                    desembolso: 0,
                    desembolsado: 0,
                    reconsideracion: 0
                },
                medioGenerador: {
                    social_manager: 1,
                    whatsapp: 0,
                    facebook: 0,
                    sitio_web: 0,
                    pbx: 0,
                    referido: 0,
                    visita_oficina: 0
                },
                origen: {
                    asesor: 1,
                    ia: 0
                }
            }
        };

        // Datos de Coopexpress por sede y asesor
        const coopexpressData = {
            escuintla: {
                // Totales de la sede completa (Anahi + M√≥nica)
                totalSede: {
                    totalClientes: 35, // 24 de Anahi + 11 de M√≥nica
                    clientesActivos: 23, // 20 de Anahi + 3 de M√≥nica
                    clientesPerdidos: 12 // 4 de Anahi + 8 de M√≥nica
                },
                // Datos individuales de Anahi (parte de los totales de Escuintla)
                anahi: {
                    nombre: "Anahi",
                    totalClientes: 24, // Total casos de Anahi
                    clientesActivos: 20,
                    clientesPerdidos: 4,
                    etapas: {
                        prospecto: 10,
                        oportunidad: 4, // Solo los activos
                        negociacion: 0,
                        comite: 3,
                        leads: 2,
                        desembolso: 1,
                        desembolsado: 0
                    },
                    medioGenerador: {
                        social_manager: 18, // Mayor√≠a de casos
                        whatsapp: 0,
                        facebook: 0,
                        sitio_web: 0,
                        pbx: 2,
                        referido: 0,
                        visita_oficina: 4 // Incluyendo los perdidos
                    },
                    origen: {
                        asesor: 20, // Solo los casos activos
                        ia: 0
                    }
                },
                // Datos individuales de Monica
                monica: {
                    nombre: "Monica",
                    totalClientes: 11, // Total casos de M√≥nica
                    clientesActivos: 3, // Edgar Lemus, Lucky, MYNOR SECAIDA (todos con ACTIVO)
                    clientesPerdidos: 8, // El resto con estado PERDIDO
                    etapas: {
                        prospecto: 1, // Edgar Lemus (PROSPECTO-ACTIVO)
                        oportunidad: 3, // Lesly Sanchez, FREDY SEQUEC, MARCELINA RAMOS (todos OPORTUNIDAD)
                        negociacion: 0,
                        comite: 0,
                        leads: 7, // Lucky, MYNOR SECAIDA, ANCELMO CHE, guadalupelemus1289, ??, Merin, Ditto
                        desembolso: 0,
                        desembolsado: 0
                    },
                    medioGenerador: {
                        social_manager: 11, // Todos los casos vienen de SOCIAL MANAGER
                        whatsapp: 0,
                        facebook: 0,
                        sitio_web: 0,
                        pbx: 0,
                        referido: 0,
                        visita_oficina: 0
                    },
                    origen: {
                        asesor: 11, // Todos los casos son gestionados por asesor
                        ia: 0
                    }
                }
            },
            coban: {
                // Totales de la sede Cob√°n (Jennifer + Lidia + Mildred)
                totalSede: {
                    totalClientes: 52, // 6 de Jennifer + 1 de Lidia + 45 de Mildred
                    clientesActivos: 44, // 6 de Jennifer + 1 de Lidia + 37 de Mildred
                    clientesPerdidos: 8 // 0 de Jennifer + 0 de Lidia + 8 de Mildred
                },
                // Datos individuales de Jennifer
                jennifer: {
                    nombre: "Jennifer",
                    totalClientes: 6, // Total casos de Jennifer
                    clientesActivos: 6, // Todos activos
                    clientesPerdidos: 0, // Ninguno perdido
                    etapas: {
                        prospecto: 0,
                        oportunidad: 3, // YULY YANETH, DAVID MARTINEZ, DELIA BA ICAL
                        negociacion: 0,
                        comite: 0,
                        leads: 3, // Cesar Del Cid, Rolando Garcia, Marlen Yol
                        desembolso: 0,
                        desembolsado: 0
                    },
                    medioGenerador: {
                        social_manager: 4, // DAVID, DELIA, Cesar, Marlen
                        whatsapp: 0,
                        facebook: 1, // Rolando Garcia
                        sitio_web: 0,
                        pbx: 0,
                        referido: 0,
                        visita_oficina: 1 // YULY YANETH
                    },
                    origen: {
                        asesor: 5, // La mayor√≠a
                        ia: 1 // Rolando Garcia
                    }
                },
                // Datos individuales de Lidia
                lidia: {
                    nombre: "Lidia",
                    totalClientes: 1, // Total casos de Lidia
                    clientesActivos: 1, // Activo
                    clientesPerdidos: 0, // Ninguno perdido
                    etapas: {
                        prospecto: 0,
                        oportunidad: 0,
                        negociacion: 0,
                        comite: 0,
                        leads: 1, // ??? / USPANTAN QUICHE/ COBAN
                        desembolso: 0,
                        desembolsado: 0
                    },
                    medioGenerador: {
                        social_manager: 1, // 100%
                        whatsapp: 0,
                        facebook: 0,
                        sitio_web: 0,
                        pbx: 0,
                        referido: 0,
                        visita_oficina: 0
                    },
                    origen: {
                        asesor: 1, // 100%
                        ia: 0
                    }
                },
                // Datos individuales de Mildred
                mildred: {
                    nombre: "Mildred",
                    totalClientes: 45, // Total casos de Mildred
                    clientesActivos: 37, // Mayor√≠a activos
                    clientesPerdidos: 8, // Algunos perdidos
                    etapas: {
                        prospecto: 8, // Varios casos PROSPECTO
                        oportunidad: 20, // La mayor√≠a en OPORTUNIDAD
                        negociacion: 1, // HERIBERTO
                        comite: 1, // RUTH ELVIRA
                        leads: 15, // Varios casos en LEADS
                        desembolso: 0,
                        desembolsado: 0
                    },
                    medioGenerador: {
                        social_manager: 38, // La mayor√≠a (~85%)
                        whatsapp: 0,
                        facebook: 0,
                        sitio_web: 0,
                        pbx: 2, // Algunos casos PBX
                        referido: 1, // Un caso REFERIDO
                        visita_oficina: 4 // Algunos casos VISITA OFICINA
                    },
                    origen: {
                        asesor: 45, // Todos gestionados por asesor
                        ia: 0
                    }
                }
            },
            '4caminos': {
                // Totales de la sede 4 Caminos (Andony + Brandon + Jorge)
                totalSede: {
                    totalClientes: 10,
                    clientesActivos: 8,
                    clientesPerdidos: 2
                },
                // Datos individuales de Andony
                andony: {
                    nombre: "Andony",
                    totalClientes: 4, // Total casos de Andony
                    clientesActivos: 4, // Todos activos
                    clientesPerdidos: 0, // Ninguno perdido
                    etapas: {
                        prospecto: 0,
                        oportunidad: 4, // Donald, Ingrid, Alba, Adilene - todos en OPORTUNIDAD
                        negociacion: 0,
                        comite: 0,
                        leads: 0,
                        desembolso: 0,
                        desembolsado: 0
                    },
                    medioGenerador: {
                        social_manager: 4, // Todos los casos son SOCIAL MANAGER
                        whatsapp: 0,
                        facebook: 0,
                        sitio_web: 0,
                        pbx: 0,
                        referido: 0,
                        visita_oficina: 0
                    },
                    origen: {
                        asesor: 4, // Todos gestionados por asesor
                        ia: 0
                    }
                },
                // Datos individuales de Brandon
                brandon: {
                    nombre: "Brandon",
                    totalClientes: 2, // Total casos de Brandon
                    clientesActivos: 1, // Luis Armando activo
                    clientesPerdidos: 1, // Cristian perdido
                    etapas: {
                        prospecto: 0,
                        oportunidad: 2, // Luis Armando y Cristian - ambos en OPORTUNIDAD
                        negociacion: 0,
                        comite: 0,
                        leads: 0,
                        desembolso: 0,
                        desembolsado: 0
                    },
                    medioGenerador: {
                        social_manager: 2, // Ambos casos son SOCIAL MANAGER
                        whatsapp: 0,
                        facebook: 0,
                        sitio_web: 0,
                        pbx: 0,
                        referido: 0,
                        visita_oficina: 0
                    },
                    origen: {
                        asesor: 2, // Ambos gestionados por asesor
                        ia: 0
                    }
                },
                // Datos individuales de Jorge
                jorge: {
                    nombre: "Jorge",
                    totalClientes: 4, // Total casos de Jorge
                    clientesActivos: 3, // Jes√∫s, German, Cesia activos
                    clientesPerdidos: 1, // Honey perdido
                    etapas: {
                        prospecto: 0,
                        oportunidad: 2, // Jes√∫s y Honey en OPORTUNIDAD
                        negociacion: 0,
                        comite: 1, // German en COMIT√â
                        leads: 1, // Cesia en LEADS
                        desembolso: 0,
                        desembolsado: 0
                    },
                    medioGenerador: {
                        social_manager: 1, // Honey es SOCIAL MANAGER
                        whatsapp: 3, // Jes√∫s, German, Cesia son WHATSAPP
                        facebook: 0,
                        sitio_web: 0,
                        pbx: 0,
                        referido: 0,
                        visita_oficina: 0
                    },
                    origen: {
                        asesor: 1, // Honey gestionado por asesor
                        ia: 3 // Jes√∫s, German, Cesia gestionados por IA
                    }
                }
            },
            'peten': {
                // Totales de la sede Pet√©n (Elizabeth + Oswaldo)
                totalSede: {
                    totalClientes: 9,
                    clientesActivos: 7,
                    clientesPerdidos: 2
                },
                // Datos individuales de Elizabeth
                elizabeth: {
                    nombre: "Elizabeth",
                    totalClientes: 2, // Total casos de Elizabeth
                    clientesActivos: 2, // Ambos activos
                    clientesPerdidos: 0, // Ninguno perdido
                    etapas: {
                        prospecto: 0,
                        oportunidad: 1, // Martina en OPORTUNIDAD
                        negociacion: 0,
                        comite: 1, // Carlos en COMIT√â
                        leads: 0,
                        desembolso: 0,
                        desembolsado: 0
                    },
                    medioGenerador: {
                        social_manager: 2, // Ambos casos son SOCIAL MANAGER
                        whatsapp: 0,
                        facebook: 0,
                        sitio_web: 0,
                        pbx: 0,
                        referido: 0,
                        visita_oficina: 0
                    },
                    origen: {
                        asesor: 2, // Ambos gestionados por asesor
                        ia: 0
                    }
                },
                // Datos individuales de Oswaldo
                oswaldo: {
                    nombre: "Oswaldo",
                    totalClientes: 7, // Total casos de Oswaldo
                    clientesActivos: 5, // Carlos, Dalila, Guisela, Gerson, Rony activos
                    clientesPerdidos: 2, // Idda y Rudi perdidos
                    etapas: {
                        prospecto: 5, // Carlos, Dalila, Guisela, Gerson, Rony en PROSPECTO
                        oportunidad: 2, // Idda y Rudi en OPORTUNIDAD
                        negociacion: 0,
                        comite: 0,
                        leads: 0,
                        desembolso: 0,
                        desembolsado: 0
                    },
                    medioGenerador: {
                        social_manager: 4, // Carlos, Dalila, Idda, Rudi son SOCIAL MANAGER
                        whatsapp: 0,
                        facebook: 0,
                        sitio_web: 0,
                        pbx: 0,
                        referido: 3, // Guisela, Gerson, Rony son REFERIDO
                        visita_oficina: 0
                    },
                    origen: {
                        asesor: 7, // Todos gestionados por asesor
                        ia: 0
                    }
                }
            },
            'mazatenango': {
                // Totales de la sede Mazatenango (Marcos + Edwin + Leonel)
                totalSede: {
                    totalClientes: 21,
                    clientesActivos: 21,
                    clientesPerdidos: 0
                },
                // Datos individuales de Marcos
                marcos: {
                    nombre: "Marcos",
                    totalClientes: 10, // Total casos de Marcos
                    clientesActivos: 10, // Todos activos
                    clientesPerdidos: 0, // Ninguno perdido
                    etapas: {
                        prospecto: 1, // Micaela en PROSPECTO
                        oportunidad: 8, // Elida, Edvin, Marco, Jose, Fernando, Luis, Jerlyn, Wilson en OPORTUNIDAD
                        negociacion: 0,
                        comite: 0,
                        leads: 1, // Cairo en LEADS
                        desembolso: 0,
                        desembolsado: 0
                    },
                    medioGenerador: {
                        social_manager: 10, // Todos los casos son SOCIAL MANAGER
                        whatsapp: 0,
                        facebook: 0,
                        sitio_web: 0,
                        pbx: 0,
                        referido: 0,
                        visita_oficina: 0
                    },
                    origen: {
                        asesor: 10, // Todos gestionados por asesor
                        ia: 0
                    }
                },
                // Datos individuales de Edwin
                edwin: {
                    nombre: "Edwin",
                    totalClientes: 10, // Total casos de Edwin
                    clientesActivos: 10, // Todos activos
                    clientesPerdidos: 0, // Ninguno perdido
                    etapas: {
                        prospecto: 0,
                        oportunidad: 10, // Todos en OPORTUNIDAD
                        negociacion: 0,
                        comite: 0,
                        leads: 0,
                        desembolso: 0,
                        desembolsado: 0
                    },
                    medioGenerador: {
                        social_manager: 8, // Manuela, Rolando, Jose, Mario, Claudia, Milena, Domingo, Cirilo son SOCIAL MANAGER
                        whatsapp: 0,
                        facebook: 0,
                        sitio_web: 0,
                        pbx: 0,
                        referido: 1, // Gladys es REFERIDO
                        visita_oficina: 1 // Irma es VISITA OFICINA
                    },
                    origen: {
                        asesor: 10, // Todos gestionados por asesor
                        ia: 0
                    }
                },
                // Datos individuales de Leonel
                leonel: {
                    nombre: "Leonel",
                    totalClientes: 1, // Total casos de Leonel
                    clientesActivos: 1, // Activo
                    clientesPerdidos: 0, // Ninguno perdido
                    etapas: {
                        prospecto: 1, // Yany en PROSPECTO
                        oportunidad: 0,
                        negociacion: 0,
                        comite: 0,
                        leads: 0,
                        desembolso: 0,
                        desembolsado: 0
                    },
                    medioGenerador: {
                        social_manager: 1, // Yany es SOCIAL MANAGER
                        whatsapp: 0,
                        facebook: 0,
                        sitio_web: 0,
                        pbx: 0,
                        referido: 0,
                        visita_oficina: 0
                    },
                    origen: {
                        asesor: 1, // Gestionado por asesor
                        ia: 0
                    }
                }
            }
        };

        let asesorSeleccionado = null;
        let chartsInstances = {};

        function seleccionarAsesor(asesorId) {
            // Remover clase active de todos los items
            document.querySelectorAll('.asesor-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Agregar clase active al item seleccionado
            event.target.closest('.asesor-item').classList.add('active');
            
            asesorSeleccionado = asesorId;
            const asesor = asesoresData[asesorId];
            
            // Actualizar el t√≠tulo del panel
            document.querySelector('.asesores-title').textContent = 'Asesores - Agencia Central';
            
            mostrarDetallesAsesor(asesor);
        }

        function mostrarDetallesAsesor(asesor) {
            const contenido = document.getElementById('contenidoAsesor');
            
            contenido.innerHTML = `
                <div class="asesor-header">
                    <h2>${asesor.nombre}</h2>
                    <div class="asesor-stats">
                        <div class="stat-card">
                            <div class="stat-number">${asesor.totalClientes}</div>
                            <div class="stat-label">Total Casos</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">${asesor.clientesActivos}</div>
                            <div class="stat-label">Activos</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">${asesor.clientesPerdidos}</div>
                            <div class="stat-label">Perdidos</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">${Math.round(((asesor.etapas.comite || 0) / asesor.totalClientes) * 100)}%</div>
                            <div class="stat-label">En Comit√©</div>
                        </div>
                    </div>
                </div>

                <div class="charts-grid">
                    <div class="chart-container">
                        <h3 class="chart-title">Distribuci√≥n por Etapas</h3>
                        <canvas id="etapasChart" width="300" height="200"></canvas>
                    </div>
                    
                    <div class="chart-container">
                        <h3 class="chart-title">Medio Generador</h3>
                        <canvas id="mediosChart" width="300" height="200"></canvas>
                    </div>

                    <div class="chart-container">
                        <h3 class="chart-title">Origen de Casos</h3>
                        <canvas id="origenChart" width="300" height="200"></canvas>
                    </div>
                </div>

                <div class="resumen-table">
                    <h3 class="chart-title">Resumen Detallado</h3>
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Etapa</th>
                                <th>Cantidad</th>
                                <th>Porcentaje</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><span class="status-badge badge-prospecto">Prospecto</span></td>
                                <td><strong>${asesor.etapas.prospecto || 0}</strong></td>
                                <td>${Math.round(((asesor.etapas.prospecto || 0) / asesor.totalClientes) * 100)}%</td>
                            </tr>
                            <tr>
                                <td><span class="status-badge badge-oportunidad">Oportunidad</span></td>
                                <td><strong>${asesor.etapas.oportunidad || 0}</strong></td>
                                <td>${Math.round(((asesor.etapas.oportunidad || 0) / asesor.totalClientes) * 100)}%</td>
                            </tr>
                            <tr>
                                <td><span class="status-badge badge-documentacion">Negociaci√≥n</span></td>
                                <td><strong>${asesor.etapas.negociacion || 0}</strong></td>
                                <td>${Math.round(((asesor.etapas.negociacion || 0) / asesor.totalClientes) * 100)}%</td>
                            </tr>
                            <tr>
                                <td><span class="status-badge badge-aprobado">Comit√©</span></td>
                                <td><strong>${asesor.etapas.comite || 0}</strong></td>
                                <td>${Math.round(((asesor.etapas.comite || 0) / asesor.totalClientes) * 100)}%</td>
                            </tr>
                            <tr>
                                <td><span class="status-badge badge-desembolso">Leads</span></td>
                                <td><strong>${asesor.etapas.leads || 0}</strong></td>
                                <td>${Math.round(((asesor.etapas.leads || 0) / asesor.totalClientes) * 100)}%</td>
                            </tr>
                            ${asesor.etapas.desembolso ? `<tr>
                                <td><span class="status-badge badge-aprobado">Desembolso</span></td>
                                <td><strong>${asesor.etapas.desembolso}</strong></td>
                                <td>${Math.round((asesor.etapas.desembolso / asesor.totalClientes) * 100)}%</td>
                            </tr>` : ''}
                            ${asesor.etapas.desembolsado ? `<tr>
                                <td><span class="status-badge badge-desembolso">Desembolsado</span></td>
                                <td><strong>${asesor.etapas.desembolsado}</strong></td>
                                <td>${Math.round((asesor.etapas.desembolsado / asesor.totalClientes) * 100)}%</td>
                            </tr>` : ''}
                            ${asesor.etapas.reconsideracion ? `<tr>
                                <td><span class="status-badge badge-oportunidad">Reconsideraci√≥n</span></td>
                                <td><strong>${asesor.etapas.reconsideracion}</strong></td>
                                <td>${Math.round((asesor.etapas.reconsideracion / asesor.totalClientes) * 100)}%</td>
                            </tr>` : ''}
                        </tbody>
                    </table>
                </div>
            `;
            
            // Esperar un frame para que el DOM se actualice
            setTimeout(() => {
                crearGraficos(asesor);
            }, 10);
        }

        function crearGraficos(asesor) {
            // Destruir gr√°ficos anteriores
            Object.values(chartsInstances).forEach(chart => {
                if (chart) chart.destroy();
            });
            chartsInstances = {};

            const orangeColors = ['#ff7f00', '#ff9500', '#ffb347', '#ffd580', '#ffe0b3'];

            // Gr√°fico de etapas
            const ctxEtapas = document.getElementById('etapasChart');
            if (ctxEtapas) {
                // Establecer tama√±o del canvas
                ctxEtapas.style.height = '300px';
                ctxEtapas.style.width = '100%';
                
                chartsInstances.etapas = new Chart(ctxEtapas, {
                    type: 'doughnut',
                    data: {
                        labels: ['Prospecto', 'Oportunidad', 'Negociaci√≥n', 'Comit√©', 'Leads', 'Desembolso', 'Desembolsado', 'Reconsideraci√≥n'],
                        datasets: [{
                            data: [
                                asesor.etapas.prospecto || 0,
                                asesor.etapas.oportunidad || 0,
                                asesor.etapas.negociacion || 0,
                                asesor.etapas.comite || 0,
                                asesor.etapas.leads || 0,
                                asesor.etapas.desembolso || 0,
                                asesor.etapas.desembolsado || 0,
                                asesor.etapas.reconsideracion || 0
                            ],
                            backgroundColor: ['#ff7f00', '#ff9500', '#ffb347', '#ffd580', '#ffe0b3', '#ffcc80', '#ffab40', '#ff8f65'],
                            borderColor: '#fff',
                            borderWidth: 3
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: true,
                        aspectRatio: 1.2,
                        plugins: {
                            legend: {
                                position: 'bottom',
                                labels: {
                                    padding: 15,
                                    font: { size: 11 }
                                }
                            }
                        }
                    }
                });
            }

            // Gr√°fico de medios
            const ctxMedios = document.getElementById('mediosChart');
            if (ctxMedios) {
                // Establecer tama√±o del canvas
                ctxMedios.style.height = '300px';
                ctxMedios.style.width = '100%';
                
                chartsInstances.medios = new Chart(ctxMedios, {
                    type: 'bar',
                    data: {
                        labels: ['Social Manager', 'Sitio Web', 'WhatsApp', 'Referido', 'Visita Oficina', 'PBX'],
                        datasets: [{
                            label: 'Casos',
                            data: [
                                asesor.medioGenerador.social_manager || 0,
                                asesor.medioGenerador.sitio_web || 0,
                                asesor.medioGenerador.whatsapp || 0,
                                asesor.medioGenerador.referido || 0,
                                asesor.medioGenerador.visita_oficina || 0,
                                asesor.medioGenerador.pbx || 0
                            ],
                            backgroundColor: orangeColors,
                            borderColor: '#ff7f00',
                            borderWidth: 2,
                            borderRadius: 5
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: true,
                        aspectRatio: 1.2,
                        plugins: {
                            legend: { display: false }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                grid: { color: 'rgba(255, 127, 0, 0.1)' },
                                ticks: {
                                    stepSize: 1
                                }
                            },
                            x: {
                                grid: { display: false }
                            }
                        }
                    }
                });
            }

            // Gr√°fico de origen
            const ctxOrigen = document.getElementById('origenChart');
            if (ctxOrigen) {
                // Establecer tama√±o del canvas
                ctxOrigen.style.height = '300px';
                ctxOrigen.style.width = '100%';
                
                chartsInstances.origen = new Chart(ctxOrigen, {
                    type: 'pie',
                    data: {
                        labels: ['Asesor', 'IA'],
                        datasets: [{
                            data: [
                                asesor.origen.asesor || 0,
                                asesor.origen.ia || 0
                            ],
                            backgroundColor: ['#ff7f00', '#ff9500'],
                            borderColor: '#fff',
                            borderWidth: 3
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: true,
                        aspectRatio: 1.2,
                        plugins: {
                            legend: {
                                position: 'bottom',
                                labels: {
                                    padding: 15,
                                    font: { size: 11 }
                                }
                            }
                        }
                    }
                });
            }
        }

        function actualizarPanelAsesores(tipo, sedeId = null, sedeNombre = null, asesores = []) {
            const panelAsesores = document.querySelector('.asesores-panel');
            const tituloAsesores = document.querySelector('.asesores-title');
            
            if (tipo === 'agencia-central') {
                tituloAsesores.textContent = 'Asesores - Agencia Central';
                panelAsesores.innerHTML = `
                    <h3 class="asesores-title">Asesores - Agencia Central</h3>
                    ${Object.keys(asesoresData).map(asesorId => {
                        const asesor = asesoresData[asesorId];
                        return `
                            <div class="asesor-item" onclick="seleccionarAsesor('${asesorId}')">
                                <div class="asesor-nombre">${asesor.nombre}</div>
                                <div class="asesor-stats">
                                    <span>üìä ${asesor.totalClientes} casos</span>
                                    <span>‚úÖ ${asesor.clientesActivos} activos</span>
                                </div>
                            </div>
                        `;
                    }).join('')}
                `;
            } else if (tipo === 'coopexpress') {
                tituloAsesores.textContent = 'Selecciona una sede';
                panelAsesores.innerHTML = `
                    <h3 class="asesores-title">Selecciona una sede</h3>
                    <div style="padding: 20px; text-align: center; color: #666;">
                        <p>Utiliza el men√∫ de sedes de arriba para seleccionar una ubicaci√≥n</p>
                    </div>
                `;
            } else if (tipo === 'sede') {
                tituloAsesores.textContent = `Asesores - ${sedeNombre}`;
                panelAsesores.innerHTML = `
                    <h3 class="asesores-title">Asesores - ${sedeNombre}</h3>
                    ${asesores.map(asesorNombre => {
                        const asesorKey = asesorNombre.toLowerCase().replace(' ', '');
                        const asesorData = coopexpressData[sedeId] && coopexpressData[sedeId][asesorKey];
                        const tieneDatos = asesorData && asesorData.totalClientes > 0;
                        
                        return `
                            <div class="asesor-item ${tieneDatos ? 'clickeable' : ''}" ${tieneDatos ? `onclick="seleccionarAsesorCoopexpress('${sedeId}', '${asesorKey}')"` : ''}>
                                <div class="asesor-nombre">${asesorNombre}</div>
                                <div class="asesor-stats">
                                    ${tieneDatos ? 
                                        `<span>üìä ${asesorData.totalClientes} casos totales</span>
                                         <span>‚úÖ ${asesorData.clientesActivos} activos</span>` : 
                                        `<span style="color: #999;">üìã Datos pendientes</span>`
                                    }
                                </div>
                            </div>
                        `;
                    }).join('')}
                `;
            }
        }

        // Funciones de navegaci√≥n principal
        function mostrarAgenciaCentral() {
            // Ocultar sedes menu
            document.getElementById('sedes-menu').classList.remove('show');
            
            // Mostrar estad√≠sticas de Agencia Central
            document.getElementById('stats-agencia-central').style.display = 'grid';
            
            // Actualizar estado activo de navegaci√≥n
            document.getElementById('agencia-central-link').classList.add('active');
            document.getElementById('coopexpress-link').classList.remove('active');
            
            // Limpiar selecciones activas de sedes
            document.querySelectorAll('.sede-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Actualizar panel de asesores para Agencia Central
            actualizarPanelAsesores('agencia-central');
            
            // Mostrar vista general de Agencia Central
            mostrarVistaGeneralAgenciaCentral();
        }

        function mostrarCoopexpress() {
            // Mostrar sedes menu
            document.getElementById('sedes-menu').classList.add('show');
            
            // Ocultar estad√≠sticas de Agencia Central
            document.getElementById('stats-agencia-central').style.display = 'none';
            
            // Actualizar estado activo de navegaci√≥n
            document.getElementById('coopexpress-link').classList.add('active');
            document.getElementById('agencia-central-link').classList.remove('active');
            
            // Limpiar panel de asesores y mostrar mensaje
            actualizarPanelAsesores('coopexpress');
            
            // Mostrar mensaje para seleccionar sede
            const contenido = document.getElementById('contenidoAsesor');
            contenido.innerHTML = `
                <div class="asesor-header">
                    <div style="margin-top: 30px; padding: 25px; background: #fff8f0; border-radius: 15px; border: 1px solid rgba(255, 127, 0, 0.2); text-align: center;">
                        <p style="color: #ff7f00; font-weight: 600; font-size: 1.2rem; margin-bottom: 10px;">üè¢ Selecciona una sede</p>
                        <p style="color: #666; margin-top: 5px; line-height: 1.5;">Utiliza el men√∫ de sedes en la parte superior para navegar entre las diferentes ubicaciones de Coopexpress.</p>
                    </div>
                </div>
            `;
        }

        function mostrarVistaGeneralAgenciaCentral() {
            const contenido = document.getElementById('contenidoAsesor');
            
            // Calcular estad√≠sticas generales
            const totalAsesores = Object.keys(asesoresData).length;
            
            contenido.innerHTML = `
                <div class="asesor-header">
                    <h2>Agencia Central - Vista General</h2>
                    <div style="margin-top: 30px; padding: 25px; background: #fff8f0; border-radius: 15px; border: 1px solid rgba(255, 127, 0, 0.2);">
                        <p style="color: #ff7f00; font-weight: 600; font-size: 1.1rem; margin-bottom: 10px;">üë• Selecciona un asesor</p>
                        <p style="color: #666; margin-top: 5px; line-height: 1.5;">Haz clic en cualquier asesor del panel izquierdo para ver sus datos detallados y gr√°ficos de rendimiento.</p>
                    </div>
                </div>
            `;

            // Actualizar el t√≠tulo del panel
            document.querySelector('.asesores-title').textContent = 'Asesores - Agencia Central';
            
            // Limpiar selecci√≥n activa de asesores
            document.querySelectorAll('.asesor-item').forEach(item => {
                item.classList.remove('active');
            });
        }

        function seleccionarSede(sedeId) {
            // Actualizar estado activo de sedes
            document.querySelectorAll('.sede-item').forEach(item => {
                item.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Mantener ocultas las estad√≠sticas de Agencia Central
            document.getElementById('stats-agencia-central').style.display = 'none';
            
            const sedes = {
                escuintla: { 
                    nombre: 'Escuintla', 
                    asesores: ['Anahi', 'Monica'],
                    totales: { totalClientes: 35, clientesActivos: 23, clientesPerdidos: 12 }
                },
                coban: { 
                    nombre: 'Cob√°n', 
                    asesores: ['Jennifer', 'Lidia', 'Mildred'],
                    totales: { totalClientes: 52, clientesActivos: 44, clientesPerdidos: 8 }
                },
                '4caminos': { 
                    nombre: '4 Caminos', 
                    asesores: ['Andony', 'Brandon', 'Jorge'],
                    totales: { totalClientes: 10, clientesActivos: 8, clientesPerdidos: 2 }
                },
                peten: { 
                    nombre: 'Pet√©n', 
                    asesores: ['Elizabeth', 'Oswaldo'],
                    totales: { totalClientes: 9, clientesActivos: 7, clientesPerdidos: 2 }
                },
                mazatenango: { 
                    nombre: 'Mazatenango', 
                    asesores: ['Marcos', 'Edwin', 'Leonel'],
                    totales: { totalClientes: 21, clientesActivos: 21, clientesPerdidos: 0 }
                }
            };

            const sede = sedes[sedeId];
            
            // Actualizar panel de asesores para mostrar solo los de esta sede
            actualizarPanelAsesores('sede', sedeId, sede.nombre, sede.asesores);
            
            // Mostrar informaci√≥n de la sede en el panel derecho
            const contenido = document.getElementById('contenidoAsesor');
            contenido.innerHTML = `
                <div class="asesor-header">
                    <h2>Sede ${sede.nombre}</h2>
                    <div class="estadisticas-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin: 20px 0;">
                        <div class="stat-card" style="background: linear-gradient(135deg, #ff7f00, #ff9500); color: white; padding: 15px; border-radius: 8px; text-align: center;">
                            <div style="font-size: 1.5rem; font-weight: bold;">${sede.totales.totalClientes}</div>
                            <div style="opacity: 0.9; font-size: 0.9rem;">Total Asignados</div>
                        </div>
                        <div class="stat-card" style="background: linear-gradient(135deg, #28a745, #20c997); color: white; padding: 15px; border-radius: 8px; text-align: center;">
                            <div style="font-size: 1.5rem; font-weight: bold;">${sede.totales.clientesActivos}</div>
                            <div style="opacity: 0.9; font-size: 0.9rem;">Activos</div>
                        </div>
                        <div class="stat-card" style="background: linear-gradient(135deg, #dc3545, #fd7e14); color: white; padding: 15px; border-radius: 8px; text-align: center;">
                            <div style="font-size: 1.5rem; font-weight: bold;">${sede.totales.clientesPerdidos}</div>
                            <div style="opacity: 0.9; font-size: 0.9rem;">Perdidos</div>
                        </div>
                    </div>
                    <div style="margin-top: 30px; padding: 25px; background: #fff8f0; border-radius: 15px; border: 1px solid rgba(255, 127, 0, 0.2);">
                        <p style="color: #ff7f00; font-weight: 600; font-size: 1.1rem; margin-bottom: 10px;">üë• Selecciona un asesor</p>
                        <p style="color: #666; margin-top: 5px; line-height: 1.5;">Haz clic en cualquier asesor del panel izquierdo para ver sus datos detallados.</p>
                        ${sede.asesores.length > 0 ? `
                            <div style="margin-top: 15px;">
                                <strong style="color: #ff7f00;">Asesores disponibles:</strong>
                                <div style="margin-top: 8px;">
                                    ${sede.asesores.map(asesor => `<span style="background: white; padding: 4px 8px; margin: 2px; border-radius: 4px; border: 1px solid rgba(255,127,0,0.3); display: inline-block; font-size: 0.9rem;">${asesor}</span>`).join('')}
                                </div>
                            </div>
                        ` : ''}
                    </div>
                </div>
            `;
        }

        function seleccionarAsesorCoopexpress(sedeId, asesorId) {
            const asesor = coopexpressData[sedeId][asesorId];
            
            // Limpiar gr√°ficos existentes
            Object.values(chartsInstances).forEach(chart => {
                if (chart) chart.destroy();
            });
            chartsInstances = {};
            
            // Actualizar variable global para compatibilidad
            asesorSeleccionado = asesorId;
            
            // Mostrar detalles usando la misma funci√≥n que Agencia Central
            mostrarDetallesAsesor(asesor);
        }

        function seleccionarSucursal(sucursalId) {
            // Funci√≥n para manejar la selecci√≥n de sucursales de Coopexpress
            const contenido = document.getElementById('contenidoAsesor');
            
            const sucursales = {
                escuintla: { nombre: 'Escuintla', asesores: ['Ana Garc√≠a', 'Pedro Morales'] },
                coban: { nombre: 'Cob√°n', asesores: ['Mar√≠a L√≥pez', 'Juan P√©rez'] },
                '4caminos': { 
                    nombre: '4 Caminos', 
                    asesores: ['Andony'],
                    totales: { totalClientes: 4, clientesActivos: 4, clientesPerdidos: 0 }
                },
                peten: { nombre: 'Pet√©n', asesores: ['Sofia Valdez', 'Roberto Kim'] },
                mazatenango: { nombre: 'Mazatenango', asesores: ['Andrea Mej√≠a', 'Carlos Hern√°ndez'] }
            };

            const sucursal = sucursales[sucursalId];
            
            contenido.innerHTML = `
                <div class="asesor-header">
                    <h2>Sucursal ${sucursal.nombre}</h2>
                    <p style="color: #666; margin-top: 10px;">Asesores: ${sucursal.asesores.join(', ')}</p>
                    <div style="margin-top: 20px; padding: 20px; background: #fff8f0; border-radius: 10px; border: 1px solid rgba(255, 127, 0, 0.2);">
                        <p style="color: #ff7f00; font-weight: 600;">üìä Dashboard en desarrollo</p>
                        <p style="color: #666; margin-top: 5px;">Los datos de esta sucursal se est√°n configurando y estar√°n disponibles pr√≥ximamente.</p>
                    </div>
                </div>
            `;

            // Actualizar el t√≠tulo del panel
            document.querySelector('.asesores-title').textContent = `Sucursal - ${sucursal.nombre}`;
            
            // Limpiar selecci√≥n activa de asesores
            document.querySelectorAll('.asesor-item').forEach(item => {
                item.classList.remove('active');
            });
        }

        // Inicializaci√≥n al cargar la p√°gina
        window.addEventListener('DOMContentLoaded', function() {
            // Mostrar Agencia Central por defecto
            mostrarAgenciaCentral();
        });
    </script>
</body>
</html>